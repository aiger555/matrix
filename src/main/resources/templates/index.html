<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Matrix Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .matrix-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .matrix-input { width: 60px; margin: 2px; text-align: center; }
        .operation-buttons { margin: 10px 0; }
        .btn { padding: 8px 15px; margin: 5px; border: none; border-radius: 3px; cursor: pointer; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-danger { background-color: #dc3545; color: white; }
        .result { margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px; }
        .error { color: #dc3545; }
        .success { color: #28a745; }
        .matrix-display { font-family: monospace; margin: 10px 0; }
        .matrix-row { margin-bottom: 5px; }
    </style>
</head>
<body>
<div class="container">
    <h1>Matrix Calculator</h1>

    <!-- Matrix Type Selection -->
    <div class="matrix-section">
        <form th:action="@{/matrix/switch-type}" method="post" id="matrixTypeForm">
            <label><strong>Matrix Size: </strong></label>
            <input type="radio" id="2x2" name="matrixType" value="2x2"
                   th:checked="${selectedMatrixType == '2x2'}">
            <label for="2x2">2x2</label>
            <input type="radio" id="3x3" name="matrixType" value="3x3"
                   th:checked="${selectedMatrixType == '3x3'}">
            <label for="3x3">3x3</label>
            <button type="submit" class="btn btn-primary">Switch</button>
        </form>
    </div>

    <!-- 2x2 Matrix Section -->
    <div th:if="${selectedMatrixType == '2x2'}">
        <form th:action="@{/matrix/calculate}" method="post">
            <input type="hidden" name="matrixType" value="2x2">

            <div class="matrix-section">
                <h3>Matrix A (2x2)</h3>
                <div>
                    <!-- Row 1 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixA2x2.data[0][0]"
                               th:value="${matrixA2x2?.data[0][0] != null ? matrixA2x2.data[0][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA2x2.data[0][1]"
                               th:value="${matrixA2x2?.data[0][1] != null ? matrixA2x2.data[0][1] : '0'}"
                               placeholder="0">
                    </div>
                    <!-- Row 2 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixA2x2.data[1][0]"
                               th:value="${matrixA2x2?.data[1][0] != null ? matrixA2x2.data[1][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA2x2.data[1][1]"
                               th:value="${matrixA2x2?.data[1][1] != null ? matrixA2x2.data[1][1] : '0'}"
                               placeholder="0">
                    </div>
                </div>
            </div>

            <div class="matrix-section">
                <h3>Matrix B (2x2)</h3>
                <div>
                    <!-- Row 1 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixB2x2.data[0][0]"
                               th:value="${matrixB2x2?.data[0][0] != null ? matrixB2x2.data[0][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB2x2.data[0][1]"
                               th:value="${matrixB2x2?.data[0][1] != null ? matrixB2x2.data[0][1] : '0'}"
                               placeholder="0">
                    </div>
                    <!-- Row 2 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixB2x2.data[1][0]"
                               th:value="${matrixB2x2?.data[1][0] != null ? matrixB2x2.data[1][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB2x2.data[1][1]"
                               th:value="${matrixB2x2?.data[1][1] != null ? matrixB2x2.data[1][1] : '0'}"
                               placeholder="0">
                    </div>
                </div>
            </div>

            <!-- Operations -->
            <div class="matrix-section">
                <h3>Operations</h3>

                <!-- Binary Operations -->
                <div class="operation-buttons">
                    <button type="submit" name="operation" value="add" class="btn btn-primary">A + B</button>
                    <button type="submit" name="operation" value="subtract" class="btn btn-primary">A - B</button>
                    <button type="submit" name="operation" value="multiply" class="btn btn-primary">A × B</button>
                </div>

                <!-- Unary Operations for Matrix A -->
                <div class="operation-buttons">
                    <strong>Matrix A: </strong>
                    <button type="submit" name="operation" value="determinantA" class="btn btn-success">Determinant</button>
                    <button type="submit" name="operation" value="transposeA" class="btn btn-success">Transpose</button>
                    <button type="submit" name="operation" value="inverseA" class="btn btn-success">Inverse</button>
                </div>

                <!-- Unary Operations for Matrix B -->
                <div class="operation-buttons">
                    <strong>Matrix B: </strong>
                    <button type="submit" name="operation" value="determinantB" class="btn btn-success">Determinant</button>
                    <button type="submit" name="operation" value="transposeB" class="btn btn-success">Transpose</button>
                    <button type="submit" name="operation" value="inverseB" class="btn btn-success">Inverse</button>
                </div>
            </div>
        </form>
    </div>

    <!-- 3x3 Matrix Section -->
    <div th:if="${selectedMatrixType == '3x3'}">
        <form th:action="@{/matrix/calculate}" method="post">
            <input type="hidden" name="matrixType" value="3x3">

            <div class="matrix-section">
                <h3>Matrix A (3x3)</h3>
                <div>
                    <!-- Row 1 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[0][0]"
                               th:value="${matrixA3x3?.data[0][0] != null ? matrixA3x3.data[0][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[0][1]"
                               th:value="${matrixA3x3?.data[0][1] != null ? matrixA3x3.data[0][1] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[0][2]"
                               th:value="${matrixA3x3?.data[0][2] != null ? matrixA3x3.data[0][2] : '0'}"
                               placeholder="0">
                    </div>
                    <!-- Row 2 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[1][0]"
                               th:value="${matrixA3x3?.data[1][0] != null ? matrixA3x3.data[1][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[1][1]"
                               th:value="${matrixA3x3?.data[1][1] != null ? matrixA3x3.data[1][1] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[1][2]"
                               th:value="${matrixA3x3?.data[1][2] != null ? matrixA3x3.data[1][2] : '0'}"
                               placeholder="0">
                    </div>
                    <!-- Row 3 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[2][0]"
                               th:value="${matrixA3x3?.data[2][0] != null ? matrixA3x3.data[2][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[2][1]"
                               th:value="${matrixA3x3?.data[2][1] != null ? matrixA3x3.data[2][1] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixA3x3.data[2][2]"
                               th:value="${matrixA3x3?.data[2][2] != null ? matrixA3x3.data[2][2] : '0'}"
                               placeholder="0">
                    </div>
                </div>
            </div>

            <div class="matrix-section">
                <h3>Matrix B (3x3)</h3>
                <div>
                    <!-- Row 1 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[0][0]"
                               th:value="${matrixB3x3?.data[0][0] != null ? matrixB3x3.data[0][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[0][1]"
                               th:value="${matrixB3x3?.data[0][1] != null ? matrixB3x3.data[0][1] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[0][2]"
                               th:value="${matrixB3x3?.data[0][2] != null ? matrixB3x3.data[0][2] : '0'}"
                               placeholder="0">
                    </div>
                    <!-- Row 2 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[1][0]"
                               th:value="${matrixB3x3?.data[1][0] != null ? matrixB3x3.data[1][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[1][1]"
                               th:value="${matrixB3x3?.data[1][1] != null ? matrixB3x3.data[1][1] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[1][2]"
                               th:value="${matrixB3x3?.data[1][2] != null ? matrixB3x3.data[1][2] : '0'}"
                               placeholder="0">
                    </div>
                    <!-- Row 3 -->
                    <div class="matrix-row">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[2][0]"
                               th:value="${matrixB3x3?.data[2][0] != null ? matrixB3x3.data[2][0] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[2][1]"
                               th:value="${matrixB3x3?.data[2][1] != null ? matrixB3x3.data[2][1] : '0'}"
                               placeholder="0">
                        <input type="text" class="matrix-input"
                               name="matrixB3x3.data[2][2]"
                               th:value="${matrixB3x3?.data[2][2] != null ? matrixB3x3.data[2][2] : '0'}"
                               placeholder="0">
                    </div>
                </div>
            </div>

            <!-- Operations -->
            <div class="matrix-section">
                <h3>Operations</h3>

                <!-- Binary Operations -->
                <div class="operation-buttons">
                    <button type="submit" name="operation" value="add" class="btn btn-primary">A + B</button>
                    <button type="submit" name="operation" value="subtract" class="btn btn-primary">A - B</button>
                    <button type="submit" name="operation" value="multiply" class="btn btn-primary">A × B</button>
                </div>

                <!-- Unary Operations for Matrix A -->
                <div class="operation-buttons">
                    <strong>Matrix A: </strong>
                    <button type="submit" name="operation" value="determinantA" class="btn btn-success">Determinant</button>
                    <button type="submit" name="operation" value="transposeA" class="btn btn-success">Transpose</button>
                    <button type="submit" name="operation" value="inverseA" class="btn btn-success">Inverse</button>
                </div>

                <!-- Unary Operations for Matrix B -->
                <div class="operation-buttons">
                    <strong>Matrix B: </strong>
                    <button type="submit" name="operation" value="determinantB" class="btn btn-success">Determinant</button>
                    <button type="submit" name="operation" value="transposeB" class="btn btn-success">Transpose</button>
                    <button type="submit" name="operation" value="inverseB" class="btn btn-success">Inverse</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Scalar Multiplication Form -->
    <div class="matrix-section">
        <form th:action="@{/matrix/scalar}" method="post">
            <input type="hidden" name="matrixType" th:value="${selectedMatrixType}">
            <h3>Scalar Multiplication</h3>
            <input type="number" step="any" name="scalar" value="2" style="width: 80px;">
            <button type="submit" name="targetMatrix" value="A" class="btn btn-danger">A × scalar</button>
            <button type="submit" name="targetMatrix" value="B" class="btn btn-danger">B × scalar</button>
        </form>
    </div>

    <!-- Results -->
    <div th:if="${result != null or determinantA != null or determinantB != null}" class="result">
        <h3>Result</h3>

        <div th:if="${success}" class="success">
            <div th:if="${result != null}">
                <strong>Matrix Result:</strong>
                <div class="matrix-display" th:text="${result}"></div>
            </div>
            <div th:if="${determinantA != null}">
                <strong>Determinant of A:</strong> <span th:text="${#numbers.formatDecimal(determinantA, 1, 4)}"></span>
            </div>
            <div th:if="${determinantB != null}">
                <strong>Determinant of B:</strong> <span th:text="${#numbers.formatDecimal(determinantB, 1, 4)}"></span>
            </div>
        </div>

        <div th:if="${error}" class="error">
            <strong>Error:</strong> <span th:text="${error}"></span>
        </div>
    </div>
</div>

<script>
    // Auto-submit the matrix type form when radio buttons change
    document.querySelectorAll('input[name="matrixType"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.getElementById('matrixTypeForm').submit();
        });
    });
</script>
</body>
</html>